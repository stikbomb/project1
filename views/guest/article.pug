extends layout
block title
    title Main page
block menu
    nav.navbar.navbar-expand-lg.navbar-dark.bg-dark.fixed-top
        .container
            a.navbar-brand(href='#') Start Bootstrap
            button.navbar-toggler(type='button', data-toggle='collapse', data-target='#navbarResponsive', aria-controls='navbarResponsive', aria-expanded='false', aria-label='Toggle navigation')
                span.navbar-toggler-icon
            #navbarResponsive.collapse.navbar-collapse
                ul.navbar-nav.ml-auto
                    if (user)
                        li.nav-item
                            a.nav-link(href='/logout') LogOut
block content
    .container
        .row
            // Post Content Column
            .col-lg-8
                // Title
                h1.mt-4 #{json[0].title}
                hr
                // Date/Time
                p Posted on #{json[0].createFormat}
                hr
                // Preview Image
                img.img-fluid.rounded(src='/uploads/' + json[0].slug + '.jpg', alt='')
                hr
                h3.mt-4 Tags:
                    each val in tags
                        a(href='/articles/search/' + val.tag)  #{val.tag}
                // Post Content
                p.lead #{json[0].content1}
                p #{json[0].content2}
                p #{json[0].content3}
                hr
                // Comments Form
                if (user === undefined)
                    a.nav-link(href='/auth/vk') To comment please log-in via VK
                else
                    .card.my-4
                        h5.card-header Leave a Comment:
                        .card-body
                            form(id="comment", name="comment", method="post", action='/articles/comment/'+json[0].slug)
                                .form-group
                                    textarea.form-control(name="content", rows="5")
                                button.btn.btn-primary(type='submit') Submit
                hr
                // Single Comment
                if (comments != undefined)
                    each val in comments
                        .media.mb-4
                            img.d-flex.mr-3.rounded-circle(src=val.avatar alt='')
                            .media-body
                                a(href=val.url)
                                    h5.mt-0 #{val.name}
                                p at #{val.createFormat}
                                h6 #{val.content}
                                hr

            // Sidebar Widgets Column
            .col-md-4
                // Search Widget
                .card.my-4
                    h5.card-header Search
                    .card-body
                        .input-group
                            input.form-control(type='text' placeholder='Search for...')
                            span.input-group-btn
                                button.btn.btn-secondary(type='button') Go!
                // Categories Widget
                .card.my-4
                    h5.card-header Categories
                    .card-body
                        .row
                            .col-lg-6
                                ul.list-unstyled.mb-0
                                    li
                                        a(href='#') Web Design
                                    li
                                        a(href='#') HTML
                                    li
                                        a(href='#') Freebies
                            .col-lg-6
                                ul.list-unstyled.mb-0
                                    li
                                        a(href='#') JavaScript
                                    li
                                        a(href='#') CSS
                                    li
                                        a(href='#') Tutorials
                // Side Widget
                .card.my-4
                    h5.card-header Side Widget
                    .card-body
                        | You can put anything you want inside of these side widgets. They are easy to use, and feature the new Bootstrap 4 card containers!
